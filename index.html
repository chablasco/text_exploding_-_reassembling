<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Exploding Text</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.6.0/p5.min.js"></script>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      overflow: hidden;
      background: #604200;
    }
    canvas {
      display: block;
    }
  </style>
</head>
<body>
<script>
let font;
let textStr = "CLICK THE SCREEN";
let letters = [];
let exploded = false;

function preload() {
  font = 'YoungSerif-Regular.otf'; // You can replace with loadFont('assets/YourFont.otf') if needed
}

function setup() {
  createCanvas(windowWidth, windowHeight);
  textFont(font);
  textSize(100);
  textAlign(CENTER, CENTER);

  let startX = width / 2 - textWidth(textStr) / 2;
  let x = startX;

  for (let i = 0; i < textStr.length; i++) {
    let c = textStr.charAt(i);
    let letterWidth = textWidth(c);
    letters.push(new Letter(c, x + letterWidth / 2, height / 2));
    x += letterWidth;
  }
}

function draw() {
  background("#604200");

  for (let letter of letters) {
    letter.update();
    letter.display();
  }
}

function mousePressed() {
  exploded = !exploded;
  for (let letter of letters) {
    if (exploded) {
      letter.explode();
    } else {
      letter.assemble();
    }
  }
}

class Letter {
  constructor(c, x, y) {
    this.c = c;
    this.origin = createVector(x, y);
    this.pos = this.origin.copy();
    this.target = this.origin.copy();
    this.velocity = createVector();
  }

  update() {
    let direction = p5.Vector.sub(this.target, this.pos);
    direction.mult(0.1);
    this.velocity.add(direction);
    this.velocity.mult(0.8);
    this.pos.add(this.velocity);
  }

  display() {
    fill("#000a4c");
    noStroke();
    text(this.c, this.pos.x, this.pos.y);
  }

  explode() {
    let angle = random(TWO_PI);
    let distance = random(100, 300);
    this.target = createVector(
      this.origin.x + cos(angle) * distance,
      this.origin.y + sin(angle) * distance
    );
  }

  assemble() {
    this.target = this.origin.copy();
  }
}
</script>
</body>
</html>
